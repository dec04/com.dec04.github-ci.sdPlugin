<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <meta name=viewport
          content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no,minimal-ui,viewport-fit=cover">
    <meta name=apple-mobile-web-app-capable content=yes>
    <meta name=apple-mobile-web-app-status-bar-style content=black>
    <title>com.dec04.github-ci.pi</title>
    <link rel="stylesheet" href="sdpi.css"/>
    <script src="main_pi.js"></script>
</head>

<!--<body onload="updateSettings();updateGlobal();">-->
<body>
<div class="sdpi-wrapper">

    <div class="sdpi-heading">About</div>

    <h4>Why?</h4>
    <p>I really like the Stream Desk platform, and I use it to the maximum. But unfortunately I did not find the plugins
        I needed, so I decided to make them myself.</p>
    <p>These plugin are provided 'as is'.</p>
    <h4>P.S.</h4>
    <p>I hope you enjoy extending your Stream Deck with my plugin.</p>
    <p>Enjoy!</p>
    <p>Your
        <mark>Dec04</mark>
        chaps.
    </p>

    <div class="wrapper">
        <div class="item">
            <div class="message m-warning">
                <img src="../resources/warning.gif" alt="Warning">
                <span>Please do not set a title or an image for this plugin as they are
            being generated on the fly!</span>
            </div>
        </div>
    </div>

    <div class="sdpi-heading">Settings</div>

    <div class="sdpi-item" id="token">
        <div class="sdpi-item-label">Token</div>
        <input class="sdpi-item-value"
               id="githubToken"
               required
               type="password"
               value=""
               placeholder="e.g. skafasjfnasf79ayw79yf9afak">
    </div>

    <div class="sdpi-item" id="username">
        <div class="sdpi-item-label">Username</div>
        <input class="sdpi-item-value"
               id="githubUsername"
               placeholder="e.g. dec04"
               required
               type="text"
               value="">
    </div>

    <div class="sdpi-item" id="poolingInterval">
        <div class="sdpi-item-label">Interval</div>
        <input class="sdpi-item-value"
               id="requestPoolingInterval"
               placeholder="e.g. 10000 (milliseconds))"
               required
               type="number"
               value="10000">
    </div>

    <div class="sdpi-item" id="repo">
        <div class="sdpi-item-label">Repository</div>
        <input class="sdpi-item-value"
               id="githubRepo"
               placeholder="e.g. somerepo"
               required
               type="text"
               value="">
    </div>

    <div class="sdpi-heading">Workflows</div>

    <div class="sdpi-item mb-16" id="fetchIDsButton">
        <button class="sdpi-item-value m-load" onclick="sendValueToPlugin('loadWorkflow', 'piAction')" value="">
            Fetch Workflows ID's
        </button>
    </div>

    <div class="sdpi-heading">Fetched workflows ID's list</div>

    <div class="sdpi-item">
        <div class="wrapper w-100">
            <div class="item">
                <div class="message m-text flex-row" id="idsBlock"></div>
            </div>
        </div>
    </div>

    <div class="sdpi-item" id="workflow">
        <div class="sdpi-item-label">Workflow ID</div>
        <input class="sdpi-item-value"
               id="githubWorkflow"
               placeholder="e.g. 123456789"
               type="number"
               value="">
    </div>

    <div class="sdpi-item mb-16" id="saveParamsButton">
        <button class="sdpi-item-value m-success" onclick="updateGlobal();updateSettings();" value="">
            Save
        </button>
    </div>

    <div class="sdpi-heading">Errors / No errors / Response text</div>

    <div class="sdpi-item">
        <div class="wrapper w-100">
            <div class="item">
                <div class="message m-error">
                    <img alt="Warning" src="../resources/error.gif">
                    <span id="lastErrorMessage">This will be the last error message!</span>
                </div>
            </div>
        </div>
    </div>

    <div class="sdpi-heading">Information</div>

    <div class="sdpi-item">
        <details class="message question">
            <summary>Instructions</summary>
            <h4>Steps:</h4>
            <p>1. Get GitHub token <a class="info" href="https://github.com/settings/tokens">On GitHub</a>;</p>
            <p>2. Fill the field <br/><span class="code">token</span> with received value;</p>
            <p>3. Set GitHub username in field <br/><span class="code">username</span>;</p>
            <p>4. Set GitHub repository <br/><span class="code">repository</span>;</p>
            <p>5. Push the button <br/><span class="code">Fetch Workflows ID's</span>;</p>
            <p>6. Select the GitHub action you are interested and fill the field <br/><span class="code">workflow</span>
                with the value of its ID;</p>
            <p>7. Click <span class="code">save</span> button;</p>
            <p>8. If any trouble, see <br/><span class="code">Errors / No errors / Response text</span> block;</p>
            <h4>Github:</h4>
            <p>More information can be found at Github</p>
            <a class="info" href="#" onclick="openPage('github.com/dec04/com.dec04.github-ci.sdPlugin')">Check
                on Github</a>
        </details>
    </div>
    <div class="sdpi-item">
        <details class="message info">
            <summary>Parameters</summary>
            <h4>Details:</h4>
            <p><span class="code">token</span> - This is the GitHub token;</p>
            <p><span class="code">name</span> - This is the GitHub username;</p>
            <p><span class="code">repository</span> - This is the GitHub repository for which you need to check the
                status of the workflow;</p>
            <p><span class="code">workflow</span> - This is the GitHub repository workflow id;</p>
        </details>
    </div>

</div>
</body>
</html>
